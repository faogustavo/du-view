<!DOCTYPE html>
<html lang="en" class="dark">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>du visualizer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Custom checkbox styling to match terminal green theme */
    input[type="checkbox"] {
      appearance: none;
      -webkit-appearance: none;
      width: 1.25rem;
      height: 1.25rem;
      border: 2px solid #6b7280;
      /* gray-500 - lighter border for better visibility */
      border-radius: 0.25rem;
      background-color: #1f2937;
      /* gray-800 - darker background */
      cursor: pointer;
      position: relative;
      transition: all 0.2s;
    }

    input[type="checkbox"]:hover {
      border-color: #9ca3af;
      /* gray-400 */
      background-color: #374151;
      /* gray-700 */
    }

    input[type="checkbox"]:checked {
      background-color: #22c55e;
      /* green-500 - darker, more saturated green */
      border-color: #22c55e;
      box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.2);
      /* subtle glow */
    }

    input[type="checkbox"]:checked::after {
      content: '';
      position: absolute;
      left: 0.35rem;
      top: 0.15rem;
      width: 0.35rem;
      height: 0.6rem;
      border: solid white;
      border-width: 0 2.5px 2.5px 0;
      transform: rotate(45deg);
    }
  </style>
</head>

<body class="bg-gray-900 text-gray-200">
  <div class="container mx-auto p-8">
    <header class="text-center mb-12">
      <h1 class="text-4xl font-bold">Disk Usage Visualizer</h1>
      <p class="text-gray-400 mt-2">
        Drop a <code class="bg-gray-700 text-green-400 rounded-md px-1 py-0.5">du</code> output file to visualize disk
        space.
      </p>
    </header>

    <main class="min-h-[60vh] pb-32">
      <div id="drop-zone"
        class="bg-gray-800 border-2 border-dashed border-gray-600 rounded-lg p-16 text-center cursor-pointer hover:border-gray-500 hover:bg-gray-700 transition-colors">
        <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48"
          aria-hidden="true">
          <path
            d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28"
            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
        <p class="mt-4 text-lg text-gray-400">
          Drop a file generated by <code class="bg-gray-700 text-green-400 rounded-md px-1 py-0.5">du</code> here
        </p>
        <p class="text-sm text-gray-500">or click to select a file</p>
        <input type="file" id="file-input" class="hidden" />
      </div>

      <div id="terminal" class="mt-8">
        <div class="max-w-3xl mx-auto">
          <!-- Command Display -->
          <div class="bg-gray-800 rounded-lg p-4 flex items-center">
            <p id="du-command" class="text-gray-400 font-mono text-sm flex-1">
              <span class="text-green-400">~</span> <span class="text-gray-500">$</span> <span id="command-text">du -h
                -t
                500m ~ > disk-stat.txt</span>
            </p>
            <button id="copy-button"
              class="ml-4 p-2 bg-gray-700 text-white rounded-md hover:bg-gray-600 transition-colors"
              title="Copy Command">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
              </svg>
            </button>
            <button id="settings-button"
              class="ml-2 p-2 bg-gray-700 text-white rounded-md hover:bg-gray-600 transition-colors"
              title="Customize Command">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transition-transform" id="settings-icon"
                fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4" />
              </svg>
            </button>
          </div>

          <!-- Expandable Settings Panel -->
          <div id="settings-panel" class="hidden mt-2 bg-gray-800 rounded-lg p-6 border border-gray-700">
            <h3 class="text-lg font-semibold text-white mb-4">Customize Command</h3>

            <!-- Flags -->
            <div class="mb-5">
              <label class="block text-sm text-gray-400 mb-2">Flags</label>
              <div class="flex flex-wrap gap-4">
                <label class="flex items-center space-x-2 cursor-pointer group relative">
                  <input type="checkbox" id="setting-h" checked
                    class="form-checkbox bg-gray-700 border-gray-600 text-green-400 rounded focus:ring-0 focus:ring-offset-0">
                  <span class="text-gray-300 font-mono">-h</span>
                  <span
                    class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-900 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none border border-gray-700">Human
                    Readable</span>
                </label>
                <label class="flex items-center space-x-2 cursor-pointer group relative">
                  <input type="checkbox" id="setting-s"
                    class="form-checkbox bg-gray-700 border-gray-600 text-green-400 rounded focus:ring-0 focus:ring-offset-0">
                  <span class="text-gray-300 font-mono">-s</span>
                  <span
                    class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-900 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none border border-gray-700">Summarize</span>
                </label>
                <label class="flex items-center space-x-2 cursor-pointer group relative">
                  <input type="checkbox" id="setting-a"
                    class="form-checkbox bg-gray-700 border-gray-600 text-green-400 rounded focus:ring-0 focus:ring-offset-0">
                  <span class="text-gray-300 font-mono">-a</span>
                  <span
                    class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-900 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none border border-gray-700">All
                    Files</span>
                </label>
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <!-- Path -->
              <div>
                <label class="block text-sm text-gray-400 mb-2">Path</label>
                <input type="text" id="setting-path" value="~"
                  class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white font-mono focus:outline-none focus:border-green-500 transition-colors">
              </div>

              <!-- Depth -->
              <div>
                <label class="block text-sm text-gray-400 mb-2">Max Depth (-d)</label>
                <input type="number" id="setting-depth" placeholder="Optional"
                  class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white font-mono focus:outline-none focus:border-green-500 transition-colors">
              </div>

              <!-- Threshold -->
              <div class="md:col-span-2">
                <label class="block text-sm text-gray-400 mb-2">Threshold (-t)</label>
                <div class="flex space-x-2">
                  <input type="number" id="setting-threshold-value" value="500"
                    class="flex-1 bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white font-mono focus:outline-none focus:border-green-500 transition-colors">
                  <select id="setting-threshold-unit"
                    class="bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white font-mono focus:outline-none focus:border-green-500 transition-colors">
                    <option value="k">kb</option>
                    <option value="m" selected>mb</option>
                    <option value="g">gb</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="results" class="hidden mt-8">
        <div class="flex justify-between items-center mb-4">
          <div id="breadcrumb" class="text-sm text-gray-400"></div>
          <button id="start-over" class="px-4 py-2 bg-red-500 text-white rounded-lg">Start Over</button>
        </div>
        <div id="stacked-bar-view" class="mb-4"></div>
        <div id="file-list" class="bg-gray-800 rounded-lg p-4"></div>
      </div>
    </main>

    <!-- Floating Footer Terminal -->
    <footer class="fixed bottom-0 right-0 z-40 pr-4">
      <div class="w-auto">
        <div class="bg-gray-900 rounded-t-lg border-2 border-gray-700 border-b-0 shadow-2xl">
          <!-- Terminal Title Bar -->
          <div class="bg-gray-800 border-b border-gray-700 px-4 py-2 rounded-t-lg flex items-center justify-between">
            <div class="flex items-center gap-2">
              <div class="flex gap-1.5">
                <div class="w-3 h-3 rounded-full bg-red-500"></div>
                <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                <div class="w-3 h-3 rounded-full bg-green-500"></div>
              </div>
            </div>

            <span class="text-gray-400 text-xs font-mono ml-2">du-view</span>

            <!-- GitHub Icon Button -->
            <a href="https://github.com/faogustavo/du-view" target="_blank" rel="noopener noreferrer"
              class="p-1.5 hover:bg-gray-700 rounded transition-colors group" title="View on GitHub">
              <svg class="w-4 h-4 text-gray-400 group-hover:text-white transition-colors" fill="currentColor"
                viewBox="0 0 24 24">
                <path fill-rule="evenodd"
                  d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"
                  clip-rule="evenodd" />
              </svg>
            </a>
          </div>

          <!-- Terminal Content -->
          <div class="px-4 pr-12 py-3">
            <!-- Built with Antigravity -->
            <div class="text-gray-400 font-mono text-sm flex items-center gap-2">
              <span class="text-gray-500">$</span>
              <span>Built with</span>
              <a href="https://antigravity.google/" target="_blank" rel="noopener noreferrer"
                class="text-green-400 font-semibold hover:text-green-300 transition-colors underline decoration-dotted">Antigravity</a>
              <span class="animate-pulse text-green-400">â–Š</span>
            </div>
          </div>
        </div>
      </div>
    </footer>
  </div>



  <script>
    const dropZone = document.getElementById("drop-zone");
    const fileInput = document.getElementById("file-input");
    const resultsDiv = document.getElementById("results");
    const fileList = document.getElementById("file-list");
    const startOverButton = document.getElementById("start-over");
    const stackedBarView = document.getElementById("stacked-bar-view");
    const breadcrumb = document.getElementById("breadcrumb");
    const copyButton = document.getElementById("copy-button");
    const duCommand = document.getElementById("du-command");
    const terminal = document.getElementById("terminal");
    const settingsButton = document.getElementById("settings-button");
    const settingsPanel = document.getElementById("settings-panel");
    const settingsIcon = document.getElementById("settings-icon");
    const commandTextElement = document.getElementById("command-text");

    // Settings Inputs
    const settingPath = document.getElementById("setting-path");
    const settingThresholdValue = document.getElementById("setting-threshold-value");
    const settingThresholdUnit = document.getElementById("setting-threshold-unit");
    const settingDepth = document.getElementById("setting-depth");
    const settingH = document.getElementById("setting-h");
    const settingS = document.getElementById("setting-s");
    const settingA = document.getElementById("setting-a");

    // Toggle settings panel
    settingsButton.addEventListener("click", () => {
      const isHidden = settingsPanel.classList.contains("hidden");
      if (isHidden) {
        settingsPanel.classList.remove("hidden");
        settingsIcon.style.transform = "rotate(180deg)";
      } else {
        settingsPanel.classList.add("hidden");
        settingsIcon.style.transform = "rotate(0deg)";
      }
    });

    // Function to update command text
    function updateCommandText() {
      let cmd = "du";
      if (settingH.checked) cmd += " -h";
      if (settingA.checked) cmd += " -a";
      if (settingS.checked) cmd += " -s";

      const thresholdValue = settingThresholdValue.value.trim();
      const thresholdUnit = settingThresholdUnit.value;
      if (thresholdValue) cmd += ` -t ${thresholdValue}${thresholdUnit}`;

      const depth = settingDepth.value.trim();
      if (depth) cmd += ` -d ${depth}`;

      const path = settingPath.value.trim() || "~";
      cmd += ` ${path}`;

      cmd += " > disk-stat.txt";

      commandTextElement.textContent = cmd;
    }

    // Add event listeners to all settings inputs for automatic updates
    settingH.addEventListener("change", updateCommandText);
    settingS.addEventListener("change", updateCommandText);
    settingA.addEventListener("change", updateCommandText);
    settingThresholdValue.addEventListener("input", updateCommandText);
    settingThresholdUnit.addEventListener("change", updateCommandText);
    settingDepth.addEventListener("input", updateCommandText);
    settingPath.addEventListener("input", updateCommandText);

    let currentTree = null;
    let currentPath = [];
    let rootPath = [];

    dropZone.addEventListener("click", () => fileInput.click());
    fileInput.addEventListener("change", (e) => {
      if (e.target.files.length > 0) {
        handleFile(e.target.files[0]);
      }
    });

    dropZone.addEventListener("dragover", (event) => {
      event.preventDefault();
      dropZone.classList.add("border-gray-500", "bg-gray-700");
    });

    dropZone.addEventListener("dragleave", () => {
      dropZone.classList.remove("border-gray-500", "bg-gray-700");
    });

    dropZone.addEventListener("drop", (event) => {
      event.preventDefault();
      dropZone.classList.remove("border-gray-500", "bg-gray-700");
      if (event.dataTransfer.items) {
        if (event.dataTransfer.items[0].kind === "file") {
          const file = event.dataTransfer.items[0].getAsFile();
          handleFile(file);
        }
      }
    });

    startOverButton.addEventListener("click", () => {
      resultsDiv.classList.add("hidden");
      dropZone.classList.remove("hidden");
      terminal.classList.remove("hidden");
      currentTree = null;
      currentPath = [];
      rootPath = [];
    });

    copyButton.addEventListener("click", () => {
      const commandText = document.getElementById("command-text").innerText;
      navigator.clipboard.writeText(commandText).then(() => {
        const originalHTML = copyButton.innerHTML;
        copyButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>`;
        setTimeout(() => {
          copyButton.innerHTML = originalHTML;
        }, 2000);
      });
    });

    function handleFile(file) {
      const reader = new FileReader();
      reader.onload = (e) => {
        const parsedTree = parseDuOutput(e.target.result);
        const { rootNode, rootPath: newRootPath } = findInitialRoot(parsedTree);
        currentTree = rootNode;
        rootPath = newRootPath;
        calculateFolderSizes(currentTree);
        dropZone.classList.add("hidden");
        terminal.classList.add("hidden");
        resultsDiv.classList.remove("hidden");
        currentPath = [];
        renderViews();
      };
      reader.readAsText(file);
    }

    function parseDuOutput(text) {
      const lines = text.trim().split("\n");
      const root = {};

      lines.forEach((line) => {
        const trimmedLine = line.trim();
        const match = trimmedLine.match(/^([^\s]+)\s+(.*)/);
        if (!match) return;

        const size = match[1];
        const path = match[2];
        const pathParts = path.split("/").filter((p) => p);

        let currentNode = root;
        pathParts.forEach((part, index) => {
          if (!currentNode[part]) {
            currentNode[part] = {};
          }
          if (index === pathParts.length - 1) {
            currentNode[part]._size = size;
          }
          currentNode = currentNode[part];
        });
      });

      return root;
    }

    function findInitialRoot(node) {
      let currentNode = node;
      let path = [];
      while (true) {
        const keys = Object.keys(currentNode).filter(
          (key) => key !== "_size"
        );
        if (keys.length === 1) {
          const key = keys[0];
          if (key !== "/") {
            path.push(key);
          }
          currentNode = currentNode[key];
        } else {
          return { rootNode: currentNode, rootPath: path };
        }
      }
    }

    function parseSize(sizeStr) {
      if (!sizeStr) return 0;
      const units = { K: 1024, M: 1024 * 1024, G: 1024 * 1024 * 1024 };
      const unit = sizeStr.slice(-1);
      const value = parseFloat(sizeStr);
      return value * (units[unit] || 1);
    }

    function calculateFolderSizes(node) {
      let totalSize = 0;
      let hasOwnSize = node.hasOwnProperty("_size");

      for (const key in node) {
        if (key === "_size") continue;
        const childSize = calculateFolderSizes(node[key]);
        totalSize += childSize;
      }

      if (hasOwnSize) {
        return parseSize(node._size);
      } else {
        node._size = formatSize(totalSize);
        return totalSize;
      }
    }

    function formatSize(sizeInBytes) {
      if (sizeInBytes < 1024) return sizeInBytes + "B";
      if (sizeInBytes < 1024 * 1024)
        return (sizeInBytes / 1024).toFixed(1) + "K";
      if (sizeInBytes < 1024 * 1024 * 1024)
        return (sizeInBytes / (1024 * 1024)).toFixed(1) + "M";
      return (sizeInBytes / (1024 * 1024 * 1024)).toFixed(1) + "G";
    }
    function createStackedBarView(node, container, rootSize) {
      const totalSize = parseSize(node._size);

      const totalSizeLabel = document.createElement("div");
      totalSizeLabel.className = "text-sm text-gray-400 mb-1";

      if (currentPath.length > 0) {
        const percentage = ((totalSize / rootSize) * 100).toFixed(1);
        totalSizeLabel.textContent = `Total Size: ${formatSize(totalSize)} of ${formatSize(rootSize)} (${percentage}%)`;
      } else {
        totalSizeLabel.textContent = `Total Size: ${formatSize(totalSize)}`;
      }

      container.appendChild(totalSizeLabel);

      const barContainer = document.createElement("div");
      barContainer.className =
        "flex h-8 w-full bg-gray-700 rounded-lg overflow-hidden";

      const colors = [
        "bg-red-500", "bg-yellow-500", "bg-green-500", "bg-blue-500", "bg-indigo-500", "bg-purple-500", "bg-pink-500",
        "bg-red-400", "bg-yellow-400", "bg-green-400", "bg-blue-400", "bg-indigo-400", "bg-purple-400", "bg-pink-400",
        "bg-red-300", "bg-yellow-300", "bg-green-300", "bg-blue-300", "bg-indigo-300", "bg-purple-300", "bg-pink-300",
        "bg-red-200", "bg-yellow-200", "bg-green-200", "bg-blue-200", "bg-indigo-200", "bg-purple-200", "bg-pink-200",
        "bg-red-100", "bg-yellow-100", "bg-green-100", "bg-blue-100", "bg-indigo-100", "bg-purple-100", "bg-pink-100",
      ];
      let colorIndex = 0;

      let keys = Object.keys(node).filter((key) => key !== "_size");
      keys.sort(
        (a, b) => parseSize(node[b]._size) - parseSize(node[a]._size)
      );

      const colorMap = {};

      keys.forEach((key) => {
        const size = parseSize(node[key]._size);
        const percentage = (size / totalSize) * 100;

        const barSegment = document.createElement("div");
        const color = colors[colorIndex % colors.length];
        barSegment.className = `${color} cursor-pointer flex items-center justify-center`;
        colorMap[key] = color;
        barSegment.className = `${color} cursor-pointer`;
        barSegment.style.width = `${percentage}%`;
        barSegment.title = key;
        barSegment.onclick = () => {
          currentPath.push(key);
          renderViews();
        };

        if (percentage >= 5) {
          const percentageLabel = document.createElement("span");
          percentageLabel.className = "text-white text-xs font-bold p-1";
          percentageLabel.textContent = `${percentage.toFixed(1)}%`;
          percentageLabel.title = key;
          barSegment.appendChild(percentageLabel);
        }
        barContainer.appendChild(barSegment);

        colorIndex++;
      });

      container.appendChild(barContainer);
      return colorMap;
    }

    function createListView(node, container, colors = {}) {
      const keys = Object.keys(node).filter((key) => key !== "_size");
      keys.sort(
        (a, b) => parseSize(node[b]._size) - parseSize(node[a]._size)
      );

      keys.forEach((key) => {
        const item = document.createElement("div");
        item.className =
          "p-2 hover:bg-gray-700 rounded-md cursor-pointer flex items-center";

        const color = colors[key];
        if (color) {
          const colorDot = document.createElement("span");
          colorDot.className = `w-3 h-3 rounded-full mr-2 ${color}`;
          item.appendChild(colorDot);
        }

        const text = document.createTextNode(
          `${key} (${node[key]._size || "N/A"})`
        );
        item.appendChild(text);

        if (Object.keys(node[key]).length > 1) {
          item.onclick = () => {
            currentPath.push(key);
            renderViews();
          };
        }
        container.appendChild(item);
      });
    }

    function renderViews() {
      let node = currentTree;
      currentPath.forEach((part) => {
        node = node[part];
      });

      stackedBarView.innerHTML = "";
      fileList.innerHTML = "";

      const rootSize = parseSize(currentTree._size);
      const colors = createStackedBarView(node, stackedBarView, rootSize);
      createListView(node, fileList, colors);
      renderBreadcrumb();
    }

    function renderBreadcrumb() {
      breadcrumb.innerHTML = "";

      const fullPath = [...rootPath, ...currentPath];

      fullPath.forEach((part, index) => {
        const partLink = document.createElement("a");
        partLink.href = "#";
        partLink.className = "text-blue-400 hover:underline";
        partLink.textContent = part;
        partLink.onclick = (e) => {
          e.preventDefault();
          currentPath = fullPath.slice(rootPath.length, index + 1);
          renderViews();
        };
        breadcrumb.appendChild(partLink);

        if (index < fullPath.length - 1) {
          const separator = document.createElement("span");
          separator.className = "mx-2";
          separator.textContent = ">";
          breadcrumb.appendChild(separator);
        }
      });

      const copyPathBtn = document.createElement("button");
      copyPathBtn.className = "ml-3 text-gray-500 hover:text-white transition-colors";
      copyPathBtn.title = "Copy Path";
      copyPathBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
        </svg>`;

      copyPathBtn.onclick = () => {
        const pathStr = fullPath.join("/");
        navigator.clipboard.writeText(pathStr).then(() => {
          const originalHTML = copyPathBtn.innerHTML;
          copyPathBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline-block text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>`;
          setTimeout(() => {
            copyPathBtn.innerHTML = originalHTML;
          }, 2000);
        });
      };
      breadcrumb.appendChild(copyPathBtn);
    }
  </script>
</body>

</html>